---
import BaseLayout from '../../layouts/BaseLayout.astro';
---

<BaseLayout title="AI Scanning" showNav={false}>
  <div class="relative min-h-screen bg-background-dark">
    <!-- Frozen Image Background (Blurred) -->
    <div class="absolute inset-0 w-full h-full z-0">
      <img 
        alt="Captured photo" 
        class="w-full h-full object-cover blur-sm scale-105"
        src="https://lh3.googleusercontent.com/aida-public/AB6AXuBJkFut74A6sWoqJYwO6ILevtQ8bEWW5goJTgOAXJXKQAZ37GXtyqcCNQHuZdQbh-llH4iOOHTSb-Kn8-1IZa49f1yeMFS3efHWUlRl0GecpFa_6zdBaVM5yvFC8ovlhoLjR2zrImTdpDuj3YnssZMPw4gkVZtyhQw0syp8JTawIFNyiGzJQFnLcGEgknUyRX0oCp3VwC6Fxiv8ccGj78cTc-N7WEUKKUuk2qUhki0r3gzP7_Mfi89M34tuo11rN33-aCirKBtdQgQA"
      />
      <div class="absolute inset-0 bg-background-dark/80"></div>
    </div>
    
    <!-- Top App Bar -->
    <div class="relative z-10 flex items-center justify-between p-6 pt-8">
      <button class="flex items-center justify-center size-10 rounded-full bg-transparent text-white/50">
        <span class="material-symbols-outlined">close</span>
      </button>
    </div>
    
    <!-- Scanning Animation Center -->
    <div class="absolute inset-0 flex flex-col items-center justify-center z-10">
      <!-- Radar/Scan Visual -->
      <div class="relative flex items-center justify-center size-64 mb-8">
        <!-- Pulse Rings -->
        <div class="absolute inset-0 rounded-full border border-primary/20 animate-[ping_3s_linear_infinite]"></div>
        <div class="absolute inset-4 rounded-full border border-primary/30 animate-[ping_3s_linear_infinite_1s]"></div>
        
        <!-- Rotating Dashed Ring -->
        <div class="absolute inset-0 rounded-full border-2 border-dashed border-primary/40 animate-spin-slow"></div>
        
        <!-- Center Circle -->
        <div class="relative size-32 rounded-full bg-primary/10 backdrop-blur-md border border-primary/50 flex items-center justify-center overflow-hidden">
          <!-- Scanning Beam -->
          <div class="absolute top-0 left-0 w-full h-1 bg-primary shadow-[0_0_15px_rgba(54,226,123,0.8)] animate-scan"></div>
          <span class="material-symbols-outlined text-primary animate-pulse text-[48px]">auto_awesome</span>
        </div>
      </div>
      
      <!-- Status Text -->
      <div class="flex flex-col items-center gap-3">
        <h2 class="text-2xl font-bold text-white tracking-tight">Mendeteksi objek...</h2>
        
        <!-- Progress Indicators -->
        <div class="flex items-center gap-2 mt-2">
          <div class="h-1.5 w-1.5 rounded-full bg-primary animate-bounce"></div>
          <div class="h-1.5 w-1.5 rounded-full bg-primary animate-bounce [animation-delay:0.2s]"></div>
          <div class="h-1.5 w-1.5 rounded-full bg-primary animate-bounce [animation-delay:0.4s]"></div>
        </div>
        <p class="text-white/60 text-sm font-light mt-2">AI sedang menganalisa produk Anda</p>
      </div>
    </div>
    
    <!-- Bottom Area (Processing Info) -->
    <div class="absolute bottom-0 left-0 right-0 z-20 pb-12 px-6">
      <div class="bg-surface-dark/90 backdrop-blur-md border border-white/5 rounded-2xl p-4 flex items-center gap-4">
        <div class="size-10 rounded-full bg-background-dark flex items-center justify-center shrink-0">
          <span class="material-symbols-outlined text-primary text-[20px]">text_fields</span>
        </div>
        <div class="flex flex-col gap-0.5 w-full">
          <div class="h-2 w-3/4 bg-gray-700 rounded-full overflow-hidden">
            <div class="h-full bg-primary w-2/3 animate-pulse"></div>
          </div>
          <span class="text-xs text-gray-400 font-mono mt-1">Menulis deskripsi...</span>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Auto redirect after animation (simulated) -->
  <script>
    setTimeout(() => {
      window.location.href = '/create/step-3';
    }, 3000);
  </script>
</BaseLayout>
